var level=1;
var ballxpos=683;
var ballypos=384;
var ballchangex=1;
var ballchangey=1;
var ballspeed=5;
var xpos=683;
var ypos=605;
var playerxmove=0;
var playerspeed=5;

(function () {
 	var you = document.createElement('div');
    var body = document.getElementsByTagName('body')[0];
    body.appendChild(you);

    you.style.position = 'fixed';
    you.style.top = ''+ypos+'px';
    you.style.left = ''+xpos+'px';
   	you.style.margin = '0px';
   	you.style.width = '200px';
   	you.style.height = '30px';
   	you.style.zIndex = 10000;
   	you.style.opacity = 1;
   	you.style.color = 'black';
   	you.style.backgroundColor = 'white';
   	you.style.border = '2px solid black';
    you.style.textAlign = 'center';
    you.id = 'you';
    you.style.display = 'block';
}());

(function () {
 	var ball = document.createElement('div');
    var body = document.getElementsByTagName('body')[0];
    body.appendChild(ball);

    ball.style.position = 'fixed';
    ball.style.top = ''+ballypos+'px';
    ball.style.left = ''+ballxpos+'px';
   	ball.style.margin = '0px';
   	ball.style.width = '50px';
   	ball.style.height = '50px';
   	ball.style.zIndex = 10000;
   	ball.style.opacity = 1;
   	ball.style.color = 'black';
   	ball.style.backgroundColor = 'white';
   	ball.style.border = '2px solid black';
    ball.style.textAlign = 'center';
    ball.id = 'ball';
    ball.style.display = 'block';
}());

function makesquare(squarexpos,squareypos,squarehits,squarename){
    (function () {
        var name = document.createElement('div');
	    var body = document.getElementsByTagName('body')[0];
	    body.appendChild(name);

	    name.style.position = 'fixed';
	    name.style.top = ''+squareypos+'px';
	    name.style.left = ''+squarexpos+'px';
    	name.style.margin = '0px';
	    name.style.paddingTop = '8px';
    	name.style.width = '180px';
    	name.style.height = '40px';
    	name.style.zIndex = 10000;
    	name.style.opacity = 0.9;
    	name.style.color = 'black';
    	name.style.backgroundColor = 'orange';
    	name.style.border = '2px solid black';
	    name.style.textAlign = 'center';
	    name.id = squarename;
	    name.style.display = 'block';
	    name.innerText = ''+squarehits+'';

	}());
}

function moveball(){
	if (ballchangex==1){
		ballxpos=ballxpos+ballspeed;
		ball.style.top = ''+ballypos+'px';
   	    ball.style.left = ''+ballxpos+'px';
	}
	if (ballchangey==1){
		ballypos=ballypos+ballspeed;
		ball.style.top = ''+ballypos+'px';
   	    ball.style.left = ''+ballxpos+'px';
	}
	if (ballchangex==-1){
		ballxpos=ballxpos-ballspeed;
		ball.style.top = ''+ballypos+'px';
   	    ball.style.left = ''+ballxpos+'px';
	}
	if (ballchangey==-1){
		ballypos=ballypos-ballspeed;
		ball.style.top = ''+ballypos+'px';
   	    ball.style.left = ''+ballxpos+'px';
	}
}

function bounce(){
	if (ballypos>=615){
		ballchangey=-1;
	}
	if (ballxpos<=0){
		ballchangex=1;
	}
	if (ballypos<=0){
		ballchangey=1;
	}
	if (ballxpos>=1316){
		ballchangex=-1;
	}
}

if (level==1){
	makesquare(200,10,2,'one');
	makesquare(390,10,2,'two');
	makesquare(580,10,2,'three');
	makesquare(770,10,2,'four');
}

function level2(){
   if (level==2){
       makesquare(0,0,4);
	   clearInterval(level2);
   }
}

function moveplayer(){
	if (playerxmove==1){
		xpos=xpos+playerspeed;
		you.style.top = ''+ypos+'px';
   	    you.style.left = ''+xpos+'px';
	}
	if (playerxmove==-1){
		xpos=xpos-playerspeed;
		you.style.top = ''+ypos+'px';
   	    you.style.left = ''+xpos+'px';
		
	}
}

window.addEventListener("keydown", function(event) { 
	if (event.key == "ArrowLeft") { 
		playerxmove=-1;
	} 
	if (event.key == "ArrowRight") { 
		playerxmove=1; 
	} 
});

window.addEventListener("keyup", function(event) { 
	if (event.key == "ArrowLeft") { 
		playerxmove=0; 
	} 
	if (event.key == "ArrowRight") { 
		playerxmove=0; 
	} 
});

function colliding(){
    //s1 collide detect
    if (ballxpos < 200 + 180 && ballxpos + 50 > 200 && ballypos < 10 + 40 && ballypos + 50 > 10) {
        alert("hi");
    }
}

setInterval(colliding,5);
setInterval(level2,10);
setInterval(moveball,15);
setInterval(bounce,3);
setInterval(moveplayer,15);
