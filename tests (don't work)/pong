var xmove=1;
var ymove=1;
var xpos=1366/2;
var ypos=665/2;
var ballspeed=3;
var p1ypos=665/2;
var p1xpos=80;
var p1ymove=0;
var playerspeed=6;
var p2ymove=0;
var p2ypos=665/2;
var p2xpos=1366-80;

(function () {
	var ball = document.createElement('div');
	var body = document.getElementsByTagName('body')[0];
	body.appendChild(ball);

	ball.style.position = 'fixed';
	ball.style.top = ''+ypos+'px';
	ball.style.left = ''+xpos+'px';
	ball.style.margin = '0px';
	ball.style.paddingTop = '10px';
	ball.style.width = '30px';
	ball.style.height = '30px';
	ball.style.zIndex = 10000;
	ball.style.opacity = 1;
	ball.style.color = 'white';
	ball.style.backgroundColor = 'white';
	ball.style.textAlign = 'center';
	ball.style.cursor = 'pointer';
	ball.style.border = '2px solid black';
	ball.id = 'ball';
	ball.style.display = 'block';
	ball.innerText = '';
}());

(function () {
	var p1 = document.createElement('div');
	var body = document.getElementsByTagName('body')[0];
	body.appendChild(p1);

	p1.style.position = 'fixed';
	p1.style.top = ''+p1ypos+'px';
	p1.style.left = ''+p1xpos+'px';
	p1.style.margin = '0px';
	p1.style.paddingTop = '10px';
	p1.style.width = '20px';
	p1.style.height = '100px';
	p1.style.zIndex = 10000;
	p1.style.opacity = 1;
	p1.style.color = 'white';
	p1.style.backgroundColor = 'white';
	p1.style.textAlign = 'center';
	p1.style.cursor = 'pointer';
	p1.style.border = '2px solid black';
	p1.id = 'p1';
	p1.style.display = 'block';
	p1.innerText = '';
}());

(function () {
	var p2 = document.createElement('div');
	var body = document.getElementsByTagName('body')[0];
	body.appendChild(p2);

	p2.style.position = 'fixed';
	p2.style.top = ''+p2ypos+'px';
	p2.style.left = ''+p2xpos+'px';
	p2.style.margin = '0px';
	p2.style.paddingTop = '10px';
	p2.style.width = '20px';
	p2.style.height = '100px';
	p2.style.zIndex = 10000;
	p2.style.opacity = 1;
	p2.style.color = 'white';
	p2.style.backgroundColor = 'white';
	p2.style.textAlign = 'center';
	p2.style.cursor = 'pointer';
	p2.style.border = '2px solid black';
	p2.id = 'p2';
	p2.style.display = 'block';
	p2.innerText = '';
	function p2move(){
		if (p2ymove==1){
			p2ypos=p2ypos+playerspeed;
			p2.style.top = ''+p2ypos+'px';
		}
		if (p2ymove==-1){
			p2ypos=p2ypos-playerspeed;
			p2.style.top = ''+p2ypos+'px';
		}
	}
	setInterval(p2move,15);
}());

function move(){
	if (p1ymove==1){
		p1ypos=p1ypos+playerspeed;
		p1.style.top = ''+p1ypos+'px';
	}
	if (p1ymove==-1){
		p1ypos=p1ypos-playerspeed;
		p1.style.top = ''+p1ypos+'px';
	}
	if (xmove==1){
		xpos=xpos+ballspeed;
		ball.style.top = ''+ypos+'px';
		ball.style.left = ''+xpos+'px';
	}
	if (xmove==-1){
		xpos=xpos-ballspeed;
		ball.style.top = ''+ypos+'px';
		ball.style.left = ''+xpos+'px';
	}
	if (ymove==-1){
		ypos=ypos-ballspeed;
		ball.style.top = ''+ypos+'px';
		ball.style.left = ''+xpos+'px';
	}
	if (ymove==1){
		ypos=ypos+ballspeed;
		ball.style.top = ''+ypos+'px';
		ball.style.left = ''+xpos+'px';
	}
}

function bounce(){
	if (xpos>=1336){
		xmove=-1;
	}
	if (xpos<=0){
		xmove=1;
	}
	if (ypos>=635){
		ymove=-1;
	}
	if (ypos<=0){
		ymove=1;
	}
}

function colliding(){
    if (xpos < p1xpos + 20 && xpos + 30 > p1xpos && ypos < p1ypos + 100 && ypos + 30 > p1ypos) {
        xmove=1;
    }
}

window.addEventListener("keydown", function(event) {
	if (event.key == "ArrowUp") {  
		p1ymove=-1;
	}
});

window.addEventListener("keyup", function(event) {
	if (event.key == "ArrowUp") {  
		p1ymove=0;
	}
});

window.addEventListener("keydown", function(event) {
	if (event.key == "ArrowDown") {  
		p1ymove=1;
	}
});

window.addEventListener("keyup", function(event) {
	if (event.key == "ArrowDown") {  
		p1ymove=0;
	}
});

function ai(){
	if (ypos>p2ypos){
		while (p2ypos != ypos){
			p2ymove=1;
		}
	}
	if (ypos<p2ypos){
		while (p2ypos != ypos){
			p2ymove=-1;
		}
	}
	if (ypos==p2ypos){
		p2ymove=0;
	}
}

setInterval(colliding,5);
setInterval(move,15);
setInterval(bounce,5);
setInterval(ai,15);
